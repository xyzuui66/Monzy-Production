<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Monzy Production | Master Control v2.0</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&display=swap');
        body { font-family: 'Plus Jakarta Sans', sans-serif; background: #050505; color: #fff; }
        .glass { background: rgba(255, 255, 255, 0.03); border: 1px solid rgba(255, 255, 255, 0.08); backdrop-filter: blur(10px); }
        .card-hover:hover { border-color: #3b82f6; transform: translateY(-5px); transition: 0.3s; }
        .sidebar { height: 100vh; position: sticky; top: 0; }
        ::-webkit-scrollbar { width: 5px; }
        ::-webkit-scrollbar-thumb { background: #3b82f6; border-radius: 10px; }
    </style>
</head>
<body class="flex flex-col md:flex-row min-h-screen">

    <aside class="sidebar w-full md:w-64 glass p-6 flex flex-col border-r border-white/5">
        <div class="mb-10">
            <h1 class="text-2xl font-black italic tracking-tighter">MONZY<span class="text-blue-500 font-bold">PROD</span></h1>
            <p class="text-[8px] text-zinc-500 uppercase tracking-[4px] font-bold">Developer Central</p>
        </div>
        
        <nav class="space-y-4 flex-1">
            <div class="flex items-center gap-3 text-blue-500 font-bold text-sm bg-blue-500/10 p-3 rounded-2xl cursor-pointer">
                <i class="fas fa-th-large"></i> Dashboard
            </div>
            <div class="flex items-center gap-3 text-zinc-500 font-bold text-sm p-3 hover:bg-white/5 rounded-2xl cursor-pointer">
                <i class="fas fa-users"></i> User Database
            </div>
            <div class="flex items-center gap-3 text-zinc-500 font-bold text-sm p-3 hover:bg-white/5 rounded-2xl cursor-pointer">
                <i class="fas fa-shield-alt"></i> Security
            </div>
            <div class="flex items-center gap-3 text-zinc-500 font-bold text-sm p-3 hover:bg-white/5 rounded-2xl cursor-pointer">
                <i class="fas fa-cog"></i> Settings
            </div>
        </nav>

        <div class="pt-10 border-t border-white/5 text-[10px] text-zinc-600 font-bold">
            <p>Â© 2026 MONZY PRODUCTION</p>
            <p>V.12.0 STABLE SYSTEM</p>
        </div>
    </aside>

    <main class="flex-1 p-6 md:p-12 overflow-y-auto">
        <header class="flex justify-between items-center mb-10">
            <div>
                <h2 class="text-3xl font-extrabold tracking-tight">Project Overview</h2>
                <p class="text-zinc-500 text-sm">Pantau semua web buatan Monzy secara real-time.</p>
            </div>
            <div class="flex gap-4">
                <div class="glass px-5 py-3 rounded-2xl text-center">
                    <p class="text-[9px] text-zinc-500 uppercase font-black">Online Webs</p>
                    <p id="total-online" class="text-xl font-bold">0</p>
                </div>
                <div class="glass px-5 py-3 rounded-2xl text-center border-blue-500/20">
                    <p class="text-[9px] text-zinc-500 uppercase font-black">Total Users</p>
                    <p id="total-users" class="text-xl font-bold text-blue-500">0</p>
                </div>
            </div>
        </header>

        <div id="project-grid" class="grid grid-cols-1 lg:grid-cols-2 gap-6">
            <div class="col-span-full py-20 text-center opacity-20 italic">
                <i class="fas fa-circle-notch animate-spin text-4xl mb-4"></i>
                <p>Mencari sinyal dari Client...</p>
            </div>
        </div>

        <div class="mt-12">
            <h3 class="text-lg font-bold mb-4 flex items-center gap-2">
                <i class="fas fa-terminal text-blue-500"></i> Global System Logs
            </h3>
            <div id="system-logs" class="glass rounded-3xl p-6 h-60 overflow-y-auto font-mono text-[11px] text-zinc-400 space-y-1">
                <p>> [SYSTEM] Monzy Production Kernel Initialized...</p>
                <p>> [SYSTEM] Connecting to Firebase Realtime Database...</p>
            </div>
        </div>
    </main>

    <script>
        // CONFIG FIREBASE (Sesuai Gambar Kamu)
        const firebaseConfig = {
            apiKey: "AIzaSyBeGnAjNVmoB-uYGWadpFkEyxlPpuTmz2o",
            authDomain: "ceziroom.firebaseapp.com",
            databaseURL: "https://ceziroom-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "ceziroom",
            storageBucket: "ceziroom.firebasestorage.app",
            messagingSenderId: "771662623358",
            appId: "1:771662623358:web:de5b7635f3ff27f19fde2f"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        // 1. Ambil Statistik User
        db.ref('users').on('value', snap => {
            const count = snap.numChildren();
            document.getElementById('total-users').innerText = count;
        });

        // 2. Monitoring Semua Project Secara Real-time
        db.ref('monzy_production/active_webs').on('value', snap => {
            const grid = document.getElementById('project-grid');
            const onlineText = document.getElementById('total-online');
            const data = snap.val();
            
            if(!data) {
                grid.innerHTML = `<p class="col-span-full text-zinc-600">Belum ada web client yang terhubung.</p>`;
                return;
            }

            let html = "";
            let onlineCount = 0;

            for(let key in data) {
                const web = data[key];
                if(web.status === "Online") onlineCount++;
                
                html += `
                <div class="glass p-8 rounded-[40px] border border-white/5 card-hover relative overflow-hidden">
                    <div class="absolute top-0 right-0 p-6">
                         <div class="w-3 h-3 rounded-full ${web.status === 'Online' ? 'bg-green-500 shadow-[0_0_15px_#22c55e]' : 'bg-zinc-700'}"></div>
                    </div>

                    <div class="flex items-center gap-4 mb-8">
                        <div class="w-14 h-14 bg-blue-600 rounded-2xl flex items-center justify-center text-2xl shadow-lg shadow-blue-600/20">
                            <i class="fas fa-rocket text-white"></i>
                        </div>
                        <div>
                            <h3 class="text-xl font-black uppercase tracking-tight">${web.name}</h3>
                            <p class="text-[10px] text-zinc-500 font-bold tracking-widest uppercase">Version ${web.version || '1.0'}</p>
                        </div>
                    </div>

                    <div class="grid grid-cols-2 gap-4 mb-8 bg-black/20 p-4 rounded-3xl border border-white/5">
                        <div>
                            <p class="text-[8px] text-zinc-600 uppercase font-black">Last Active User</p>
                            <p class="text-xs font-bold text-blue-400">${web.userActive || 'No Activity'}</p>
                        </div>
                        <div>
                            <p class="text-[8px] text-zinc-600 uppercase font-black">System Status</p>
                            <p class="text-xs font-bold ${web.status === 'Online' ? 'text-green-500' : 'text-zinc-500'}">${web.status}</p>
                        </div>
                    </div>

                    <div class="flex flex-wrap gap-2">
                        <button onclick="controlWeb('${key}', 'SHUTDOWN')" class="flex-1 bg-red-600/10 hover:bg-red-600 text-red-500 hover:text-white py-4 rounded-2xl text-[10px] font-black uppercase transition-all">Shut Down</button>
                        <button onclick="controlWeb('${key}', 'REFRESH')" class="flex-1 bg-zinc-800 hover:bg-zinc-700 text-white py-4 rounded-2xl text-[10px] font-black uppercase transition-all">Restart</button>
                        <button onclick="controlWeb('${key}', 'NORMAL')" class="flex-1 bg-blue-600/10 hover:bg-blue-600 text-blue-500 hover:text-white py-4 rounded-2xl text-[10px] font-black uppercase transition-all">Recover</button>
                    </div>
                </div>`;
                
                logToSystem(`Incoming signal from ${web.name} - Status: ${web.status}`);
            }

            grid.innerHTML = html;
            onlineText.innerText = onlineCount;
        });

        // 3. Fungsi Kendali
        function controlWeb(id, action) {
            db.ref(`monzy_production/remote_control/${id}`).set(action);
            logToSystem(`Command SENT: ${action} to ${id}`);
        }

        // 4. Log Console System
        function logToSystem(msg) {
            const logs = document.getElementById('system-logs');
            const time = new Date().toLocaleTimeString();
            logs.innerHTML += `<p>> [${time}] ${msg}</p>`;
            logs.scrollTo({ top: logs.scrollHeight, behavior: 'smooth' });
        }
    </script>
</body>
</html>

